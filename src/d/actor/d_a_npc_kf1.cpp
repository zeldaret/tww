//
// Generated by dtk
// Translation Unit: d_a_npc_kf1.cpp
//

#include "d/actor/d_a_npc_kf1.h"
#include "JSystem/JUtility/JUTAssert.h"
#include "d/d_com_inf_game.h"
#include "d/d_procname.h"
#include "f_op/f_op_actor_mng.h"

#include "d/actor/d_a_tsubo.h"

u32 a_siz_tbl[] = {
    0
};

/* 000000EC-00000150       .text __ct__15daNpc_Kf1_HIO_cFv */
daNpc_Kf1_HIO_c::daNpc_Kf1_HIO_c() {
    /* Nonmatching */
}

/* 00000198-000001E4       .text nodeCB_Head__FP7J3DNodei */
static BOOL nodeCB_Head(J3DNode* node, int idx) {
    /* Nonmatching */
    if (idx == 0) {
        void* userData = (void*)j3dSys.getModel()->getUserArea();
        if (userData != NULL) {
           ((daNpc_Kf1_c*)userData)->_nodeCB_Head(node, j3dSys.getModel());
        }
    }
    return TRUE;
}

cXyz a_eye_pos_off;
u8 init;

/* 000001E4-000002D8       .text _nodeCB_Head__11daNpc_Kf1_cFP7J3DNodeP8J3DModel */
void daNpc_Kf1_c::_nodeCB_Head(J3DNode* node, J3DModel* model) {
    a_eye_pos_off = cXyz(30.0f, 30.0f, 0.0f);

    u16 joint_number = static_cast<J3DJoint*>(node)->getJntNo();
    MTXCopy(model->getAnmMtx(joint_number), mDoMtx_stack_c::now);
    mDoMtx_stack_c::multVecZero(&this->mMtx);
    mDoMtx_stack_c::multVec(&a_eye_pos_off, &head_anm_vec);
    MTXCopy(mDoMtx_stack_c::now, j3dSys.mCurrentMtx);
    model->setAnmMtx(joint_number, mDoMtx_stack_c::now);
    /* Nonmatching */
}

/* 00000314-00000360       .text nodeCB_Neck__FP7J3DNodei */
static BOOL nodeCB_Neck(J3DNode* node, int idx) {
     if (idx == 0) {
        void* userData = (void*)j3dSys.getModel()->getUserArea();
        if (userData != NULL) {
           ((daNpc_Kf1_c*)userData)->_nodeCB_Neck(node, j3dSys.getModel());
        }
    }
    return TRUE;
   /* Nonmatching */
}

/* 00000360-00000400       .text _nodeCB_Neck__11daNpc_Kf1_cFP7J3DNodeP8J3DModel */
void daNpc_Kf1_c::_nodeCB_Neck(J3DNode* node, J3DModel* model) {
    u16 joint_number = static_cast<J3DJoint*>(node)->getJntNo();
    MTXCopy(model->getAnmMtx(joint_number), mDoMtx_stack_c::now);
    mDoMtx_stack_c::XrotM(this->m_jnt.getHead_y());
    mDoMtx_stack_c::ZrotM(-this->m_jnt.getHead_x());

    MTXCopy(mDoMtx_stack_c::now, j3dSys.mCurrentMtx);
    model->setAnmMtx(joint_number, mDoMtx_stack_c::now);
}

/* 00000400-0000044C       .text nodeCB_BackBone__FP7J3DNodei */
static BOOL nodeCB_BackBone(J3DNode* node, int idx) {
    /* Nonmatching */
    if (idx == 0) {
        void* userData = (void*)j3dSys.getModel()->getUserArea();
        if (userData != NULL) {
           ((daNpc_Kf1_c*)userData)->_nodeCB_BackBone(node, j3dSys.getModel());
        }
    }
    return TRUE;
}

/* 0000044C-000004EC       .text _nodeCB_BackBone__11daNpc_Kf1_cFP7J3DNodeP8J3DModel */
void daNpc_Kf1_c::_nodeCB_BackBone(J3DNode* node, J3DModel* model) {
    u16 joint_number = static_cast<J3DJoint*>(node)->getJntNo();
    MTXCopy(model->getAnmMtx(joint_number), mDoMtx_stack_c::now);
    mDoMtx_stack_c::XrotM(this->m_jnt.getBackbone_y());
    mDoMtx_stack_c::ZrotM(-this->m_jnt.getBackbone_x());

    MTXCopy(mDoMtx_stack_c::now, j3dSys.mCurrentMtx);
    model->setAnmMtx(joint_number, mDoMtx_stack_c::now);
}

/* 000004EC-0000050C       .text CheckCreateHeap__FP10fopAc_ac_c */
static BOOL CheckCreateHeap(fopAc_ac_c* i_this) {
    return static_cast<daNpc_Kf1_c*>(i_this)->CreateHeap();
    /* Nonmatching */
}

#define L_CHECK_SZ 20
s32 l_check_wrk;
fopAc_ac_c* l_check_inf[L_CHECK_SZ];

/* 0000050C-0000059C       .text searchActor_Tsubo__FPvPv */
BOOL searchActor_Tsubo(void* i_act, void* arg2) {
    // TODO enums
    fopAc_ac_c *act = static_cast<fopAc_ac_c*>(i_act);
    if (l_check_wrk < L_CHECK_SZ && fopAc_IsActor(i_act) && act->base.mProcName == PROC_TSUBO && daObj::PrmAbstract<daTsubo::Act_c::Prm_e>(act, daTsubo::Act_c::PRM_TYPE_W, daTsubo::Act_c::PRM_TYPE_S) == 0xe) {
        l_check_inf[l_check_wrk] = act;
        l_check_wrk++;
    }
    return FALSE;
}

/* 0000059C-0000061C       .text init_KF1_0__11daNpc_Kf1_cFv */
BOOL daNpc_Kf1_c::init_KF1_0() {
    if (!dComIfGs_isEventBit(0x2d01)) {
        set_action(&daNpc_Kf1_c::wait_action1, NULL);
        return TRUE;
    }
    return FALSE;
    /* Nonmatching */ // TODO offsets
}

dCcD_SrcCyl dNpc_cyl_src;

char* l_evn_tbl[] = {
    "angry", "rupee_age", ""
};
/* 0000061C-0000083C       .text createInit__11daNpc_Kf1_cFv */
BOOL daNpc_Kf1_c::createInit() {
    /* Nonmatching */
    for (int i = 0; i < 3; ++i) {
        field_0x780[i] = dComIfGp_evmng_getEventIdx(l_evn_tbl[i], 0xFF);
    }
    mEventCut.setActorInfo2("Kf1", this);
    this->field_0x79F = base.mParameters >> 8;
    u8 weight = 0xFF;
    u8 params = base.mParameters >> 0x10;
    if (params != 0xff) {
        pathRun.setInf(params, current.roomNo, true);
        if (pathRun.mPath == NULL) {
            return FALSE;
        }
        fopAcM_OffStatus(this, fopAcStts_NOCULLEXEC_e);
        weight = 0xD9;
        set_pthPoint(0);
    }
    if (pathRun.mPath == NULL) {
        return FALSE;
    }
    attention_info.flags = fopAc_Attn_LOCKON_TALK_e | fopAc_Attn_ACTION_SPEAK_e;
    attention_info.distances[1] = 0xab;
    attention_info.distances[3] = 0xab;
    gravity = -4.5f;
    field_0x7F6 = 10;
    BOOL status;
    if (field_0x7FC == 0) {
        status = init_KF1_0();
    }
    else {
        status = FALSE;
    }
    if (!status) return FALSE;
    mAngle = current.angle;
    shape_angle = mAngle;
    mStts.Init(weight, 0xff, this);
    mCyl.SetStts(&mStts);
    mCyl.Set(dNpc_cyl_src);
    mObjAcch.CrrPos(*dComIfG_Bgsp());
    play_animation();
    tevStr.mRoomNo = dComIfG_Bgsp()->GetRoomId(mObjAcch.m_gnd);
    tevStr.mEnvrIdxOverride = dComIfG_Bgsp()->GetPolyColor(mObjAcch.m_gnd);
    mpMorf->setMorf(0.0f);
    setMtx(true);
    return TRUE;
}

/* 0000083C-000008E4       .text play_animation__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::play_animation() {

    int mtrlSndId = 0;
    play_btp_anm();
    if (mObjAcch.ChkGroundHit()) {
        mtrlSndId = dComIfG_Bgsp()->GetMtrlSndId(mObjAcch.m_gnd);
    }
    s8 reverb = dComIfGp_getReverb(current.roomNo);
    field_0x79C = mpMorf->play(&eyePos, mtrlSndId, reverb);
    if (mpMorf->mFrameCtrl.mFrame < field_0x76C) {
        field_0x79C = 1;
    }
    field_0x76C = mpMorf->mFrameCtrl.mFrame;
}

/* 000008E4-00000A20       .text setMtx__11daNpc_Kf1_cFb */
void daNpc_Kf1_c::setMtx(bool arg) {
    mpMorf->getModel()->setBaseScale(scale);
    MTXTrans(mDoMtx_stack_c::now, current.pos.x, current.pos.y, current.pos.z);
    mDoMtx_ZXYrotM(mDoMtx_stack_c::now, mAngle.x, mAngle.y, mAngle.z);
    mpMorf->getModel()->setBaseTRMtx(mDoMtx_stack_c::now);
    mpMorf->calc();
    if (mModel != NULL) {
        mDoMtx_stack_c::copy(mpMorf->getModel()->mpNodeMtx[m_hed_jnt_num]);
        //MTXCopy(mpMorf->getModel()->mpNodeMtx[m_hed_jnt_num], mDoMtx_stack_c::now);
        mDoMtx_stack_c::transM(33.87f, 3.26f, 0.0f);
        mDoMtx_XYZrotM(mDoMtx_stack_c::now, -0x4000, -0x4000, 0);
        mModel->setBaseTRMtx(mDoMtx_stack_c::now);
        mModel->calc();
    }
    setAttention(arg);
}

/* 00000A20-00000A34       .text bckResID__11daNpc_Kf1_cFi */
s32 daNpc_Kf1_c::bckResID(int id) {
    static const s32 a_resID_tbl[10] = {
        0xA, 0xC, 0x6, 0x7, 0x8, 0x9, 0x5, 0x3, 0x4, 0xB
    };
    return a_resID_tbl[id];
    /* Nonmatching */
}


/* 00000A34-00000A48       .text btpResID__11daNpc_Kf1_cFi */
s32 daNpc_Kf1_c::btpResID(int idx) {
    static const s32 a_resID_tbl[2] = {
        0x02, 0x0d
    };
    /* Nonmatching */
    return a_resID_tbl[idx];
}

/* 00000A48-00000B4C       .text setBtp__11daNpc_Kf1_cFScb */
BOOL daNpc_Kf1_c::setBtp(signed char btpId, bool i_modify) {
    /* Nonmatching */
    J3DModel* model = mpMorf->getModel();
    if (btpId < 0) {
        return FALSE;
    }
    J3DAnmTexPattern *a_btp = (J3DAnmTexPattern*) dComIfG_getObjectIDRes(field_0x6d4, (int)btpResID(btpId));
    JUT_ASSERT(0x20a, a_btp != NULL);

    field_0x7F5 = btpId;
    field_0x6F0 = 0;
    field_0x6F2 = 0;
    return mBtpAnm.init(model->getModelData(), a_btp, TRUE, 0, 1.0f, 0, -1, i_modify, FALSE);
}

/* 00000B4C-00000B6C       .text init_texPttrnAnm__11daNpc_Kf1_cFScb */
BOOL daNpc_Kf1_c::init_texPttrnAnm(signed char btpId, bool i_modify) {
    setBtp(btpId, i_modify);
}

/* 00000B6C-00000C08       .text play_btp_anm__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::play_btp_anm() {
    u8 dur = mBtpAnm.getBtpAnm()->getFrameMax();
    if (field_0x7F5 != 0 || cLib_calcTimer(&field_0x6F2) == 0) {
        field_0x6F0++;
        if (field_0x6F0 >= dur) {
            if (field_0x7F5 != 0) {
                field_0x6F0 = dur;
            }
            else {
                field_0x6F2 = cLib_getRndValue(60, 90);
                field_0x6F0 = 0;
            }
        }
    }
}

/* 00000C08-00000CA4       .text setAnm_anm__11daNpc_Kf1_cFPQ211daNpc_Kf1_c9anm_prm_c */
void daNpc_Kf1_c::setAnm_anm(daNpc_Kf1_c::anm_prm_c* i_anmPrm) {
    /* Nonmatching */
}

/* 00000CA4-00000D14       .text setAnm_NUM__11daNpc_Kf1_cFii */
void daNpc_Kf1_c::setAnm_NUM(int, int) {
    /* Nonmatching */
}

/* 00000D14-00000D80       .text setAnm__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::setAnm() {
    /* Nonmatching */
}

/* 00000D80-00000D84       .text chngAnmTag__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::chngAnmTag() {
    /* Nonmatching */
}

/* 00000D84-00000D88       .text ctrlAnmTag__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::ctrlAnmTag() {
    /* Nonmatching */
}

/* 00000D88-00000DEC       .text chngAnmAtr__11daNpc_Kf1_cFUc */
void daNpc_Kf1_c::chngAnmAtr(unsigned char) {
    /* Nonmatching */
}

/* 00000DEC-00000E60       .text ctrlAnmAtr__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::ctrlAnmAtr() {
    /* Nonmatching */
}

/* 00000E60-00000EC4       .text setAnm_ATR__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::setAnm_ATR() {
    /* Nonmatching */
}

/* 00000EC4-00000F80       .text anmAtr__11daNpc_Kf1_cFUs */
void daNpc_Kf1_c::anmAtr(unsigned short) {
    /* Nonmatching */
}

/* 00000F80-000010F4       .text next_msgStatus__11daNpc_Kf1_cFPUl */
u16 daNpc_Kf1_c::next_msgStatus(unsigned long*) {
    /* Nonmatching */
}

/* 000010F4-000011DC       .text getMsg_KF1_0__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::getMsg_KF1_0() {
    /* Nonmatching */
}

/* 000011DC-00001218       .text getMsg__11daNpc_Kf1_cFv */
u32 daNpc_Kf1_c::getMsg() {
    /* Nonmatching */
}

/* 00001218-000012A4       .text eventOrder__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::eventOrder() {
    /* Nonmatching */
}

/* 000012A4-00001380       .text checkOrder__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::checkOrder() {
    /* Nonmatching */
}

/* 00001380-00001418       .text chk_talk__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::chk_talk() {
    /* Nonmatching */
}

/* 00001418-0000146C       .text searchByID__11daNpc_Kf1_cFUiPi */
void daNpc_Kf1_c::searchByID(fpc_ProcID, int*) {
    /* Nonmatching */
}

/* 0000146C-0000156C       .text srch_Tsubo__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::srch_Tsubo() {
    /* Nonmatching */
}

/* 0000156C-000017F4       .text create_rupee__11daNpc_Kf1_cF4cXyzi */
void daNpc_Kf1_c::create_rupee(cXyz, int) {
    /* Nonmatching */
}

/* 000017F4-00001A0C       .text ready_kutaniCamera__11daNpc_Kf1_cFii */
void daNpc_Kf1_c::ready_kutaniCamera(int, int) {
    /* Nonmatching */
}

/* 00001A0C-00001BD0       .text lookBack__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::lookBack() {
    /* Nonmatching */
}

/* 00001BD0-00001C50       .text chkAttention__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::chkAttention() {
    /* Nonmatching */
}

/* 00001C50-00001CA8       .text setAttention__11daNpc_Kf1_cFb */
void daNpc_Kf1_c::setAttention(bool) {
    /* Nonmatching */
}

/* 00001CA8-00001D30       .text decideType__11daNpc_Kf1_cFi */
BOOL daNpc_Kf1_c::decideType(int) {
    /* Nonmatching */
}

/* 00001D30-00001E04       .text cut_init_ANGRY_START__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_ANGRY_START(int) {
    /* Nonmatching */
}

/* 00001E04-00001E0C       .text cut_move_ANGRY_START__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_ANGRY_START() {
    /* Nonmatching */
}

/* 00001E0C-00001E5C       .text cut_init_BENSYOU_START__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_BENSYOU_START(int) {
    /* Nonmatching */
}

/* 00001E5C-00001E64       .text cut_move_BENSYOU_START__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_BENSYOU_START() {
    /* Nonmatching */
}

/* 00001E64-00001EB4       .text cut_init_TSUBO_CNT__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_TSUBO_CNT(int) {
    /* Nonmatching */
}

/* 00001EB4-00001EBC       .text cut_move_TSUBO_CNT__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_TSUBO_CNT() {
    /* Nonmatching */
}

/* 00001EBC-00001EE8       .text cut_init_BENSYOU__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_BENSYOU(int) {
    /* Nonmatching */
}

/* 00001EE8-00001EF0       .text cut_move_BENSYOU__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_BENSYOU() {
    /* Nonmatching */
}

/* 00001EF0-00001FE4       .text cut_init_GET_OUT__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_GET_OUT(int) {
    /* Nonmatching */
}

/* 00001FE4-00002044       .text cut_move_GET_OUT__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_GET_OUT() {
    /* Nonmatching */
}

/* 00002044-0000205C       .text cut_init_DSP_RUPEE_CNT__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_DSP_RUPEE_CNT(int) {
    /* Nonmatching */
}

/* 0000205C-00002064       .text cut_move_DSP_RUPEE_CNT__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_DSP_RUPEE_CNT() {
    /* Nonmatching */
}

/* 00002064-000020AC       .text cut_init_PLYER_TRN__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_PLYER_TRN(int) {
    /* Nonmatching */
}

/* 000020AC-000020B4       .text cut_move_PLYER_TRN__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_PLYER_TRN() {
    /* Nonmatching */
}

/* 000020B4-000020B8       .text cut_init_RUPEE_CNT_END__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_RUPEE_CNT_END(int) {
    /* Nonmatching */
}

/* 000020B8-000020EC       .text cut_move_RUPEE_CNT_END__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_RUPEE_CNT_END() {
    /* Nonmatching */
}

/* 000020EC-00002168       .text cut_init_START_AGE__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_START_AGE(int) {
    /* Nonmatching */
}

/* 00002168-00002178       .text cut_move_START_AGE__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_START_AGE() {
    /* Nonmatching */
}

/* 00002178-00002284       .text cut_init_PLYER_MOV__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_PLYER_MOV(int) {
    /* Nonmatching */
}

/* 00002284-0000228C       .text cut_move_PLYER_MOV__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_PLYER_MOV() {
    /* Nonmatching */
}

/* 0000228C-000023E8       .text cut_init_RUPEE_SET__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_RUPEE_SET(int) {
    /* Nonmatching */
}

/* 000023E8-0000260C       .text cut_move_RUPEE_SET__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_RUPEE_SET() {
    /* Nonmatching */
}

/* 0000260C-000026B4       .text cut_init_TSUBO_ATN__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_TSUBO_ATN(int) {
    /* Nonmatching */
}

/* 000026B4-00002794       .text cut_move_TSUBO_ATN__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_TSUBO_ATN() {
    /* Nonmatching */
}

/* 00002794-000028F4       .text cut_init_TLK_MSG__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_TLK_MSG(int) {
    /* Nonmatching */
}

/* 000028F4-00002954       .text cut_init_CONTNUE_TLK__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::cut_init_CONTNUE_TLK(int) {
    /* Nonmatching */
}

/* 00002954-000029D8       .text cut_move_TLK_MSG__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::cut_move_TLK_MSG() {
    /* Nonmatching */
}

/* 000029D8-00002C60       .text privateCut__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::privateCut(int) {
    /* Nonmatching */
}

/* 00002C60-00002C84       .text endEvent__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::endEvent() {
    /* Nonmatching */
}

/* 00002C84-00002CBC       .text isEventEntry__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::isEventEntry() {
    /* Nonmatching */
}

/* 00002CBC-00002E14       .text event_proc__11daNpc_Kf1_cFi */
void daNpc_Kf1_c::event_proc(int) {
    /* Nonmatching */
}

/* 00002E14-00002EC0       .text set_action__11daNpc_Kf1_cFM11daNpc_Kf1_cFPCvPvPv_iPv */
void daNpc_Kf1_c::set_action(int (daNpc_Kf1_c::*)(void*), void*) {
    /* Nonmatching */
}

/* 00002EC0-00002F88       .text setStt__11daNpc_Kf1_cFSc */
void daNpc_Kf1_c::setStt(signed char) {
    /* Nonmatching */
}

/* 00002F88-00003030       .text set_pthPoint__11daNpc_Kf1_cFUc */
void daNpc_Kf1_c::set_pthPoint(unsigned char) {
    /* Nonmatching */
}

/* 00003030-000030A8       .text chk_tsubo__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::chk_tsubo() {
    /* Nonmatching */
}

/* 000030A8-0000317C       .text orderTsuboEvent__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::orderTsuboEvent() {
    /* Nonmatching */
}

/* 0000317C-0000327C       .text wait_1__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::wait_1() {
    /* Nonmatching */
}

/* 0000327C-000034C4       .text walk_1__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::walk_1() {
    /* Nonmatching */
}

/* 000034C4-000035CC       .text talk_1__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::talk_1() {
    /* Nonmatching */
}

/* 000035CC-000036B4       .text wait_action1__11daNpc_Kf1_cFPv */
BOOL daNpc_Kf1_c::wait_action1(void*) {
    /* Nonmatching */
}

/* 000036B4-000037F4       .text demo__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::demo() {
    /* Nonmatching */
}

/* 000037F4-00003884       .text shadowDraw__11daNpc_Kf1_cFv */
void daNpc_Kf1_c::shadowDraw() {
    /* Nonmatching */
}

/* 00003884-0000397C       .text _draw__11daNpc_Kf1_cFv */
bool daNpc_Kf1_c::_draw() {
    /* Nonmatching */
}

/* 0000397C-00003BC4       .text _execute__11daNpc_Kf1_cFv */
bool daNpc_Kf1_c::_execute() {
    /* Nonmatching */
}

/* 00003BC4-00003C18       .text _delete__11daNpc_Kf1_cFv */
bool daNpc_Kf1_c::_delete() {
    /* Nonmatching */
}

/* 00003C18-00003E64       .text _create__11daNpc_Kf1_cFv */
s32 daNpc_Kf1_c::_create() {
    /* Nonmatching */
    fopAcM_SetupActor(this, daNpc_Kf1_c);
    if (!decideType(0)) {
        return cPhs_ERROR_e;
    }
    field_0x7A6 = dComIfG_resLoad(&this->mPhs, field_0x6d4) == cPhs_COMPLEATE_e;
    if (field_0x7A6) {
        if (!fopAcM_entrySolidHeap(this, CheckCreateHeap, a_siz_tbl[this->field_0x7FB])) {
            return cPhs_ERROR_e;
        }
        else {
            fopAcM_SetMtx(this, mpMorf->getModel()->getBaseTRMtx());
            fopAcM_setCullSizeBox(this,-90.0f,-20.0f,-80.0f,90.0f,200.0f,80.0f);
            if (!createInit()) {
                return cPhs_ERROR_e;
            }
        }
    }
    return cPhs_COMPLEATE_e;
}

/* 00004130-0000442C       .text bodyCreateHeap__11daNpc_Kf1_cFv */
BOOL daNpc_Kf1_c::bodyCreateHeap() {
    /* Nonmatching */
    J3DModelData* a_mdl_dat = (J3DModelData*) dComIfG_getObjectIDRes(field_0x6d4, 1);
    JUT_ASSERT(0x97f, a_mdl_dat != NULL);
    mpMorf = new mDoExt_McaMorf(a_mdl_dat, NULL, NULL, NULL, ~J3DFrameCtrl::LOOP_ONCE_e, 1.0f, 0, -1, 1, NULL, 0x80000, 0x11000022);
    if (mpMorf == NULL || mpMorf->mpModel == NULL) {
        mpMorf = NULL;
        return FALSE;
    }

    if (!init_texPttrnAnm(0, false)) {
        mpMorf = NULL;
        return FALSE;
    }

    m_hed_jnt_num = a_mdl_dat->getJointName()->getIndex("head");
    JUT_ASSERT(0x993, m_hed_jnt_num >= 0);
    m_bbone_jnt_num = a_mdl_dat->getJointName()->getIndex("backbone");
    JUT_ASSERT(0x995, m_bbone_jnt_num >= 0);
    m_nck_jnt_num = a_mdl_dat->getJointName()->getIndex("neck");
    JUT_ASSERT(0x997, m_nck_jnt_num >= 0);

    mpMorf->getModel()->getModelData()->getJointTree().getJointNodePointer(m_hed_jnt_num)
        ->mCallBack = nodeCB_Head;
    mpMorf->getModel()->getModelData()->getJointTree().getJointNodePointer(m_bbone_jnt_num)
        ->mCallBack = nodeCB_BackBone;
    mpMorf->getModel()->getModelData()->getJointTree().getJointNodePointer(m_nck_jnt_num)
        ->mCallBack = nodeCB_Neck;
    //mpMorf->getModel()->setUserArea(u32 area)
    return TRUE;
}

/* 0000442C-000044EC       .text itemCreateHeap__11daNpc_Kf1_cFv */
BOOL daNpc_Kf1_c::itemCreateHeap() {
    /* Nonmatching */
    J3DModelData* a_mdl_dat = (J3DModelData*) dComIfG_getObjectIDRes(field_0x6d4, 0);
    JUT_ASSERT(0x9ac, a_mdl_dat != NULL);

    // TODO enums?
    J3DModel* model = mDoExt_J3DModel__create(a_mdl_dat, 0x80000, 0x11000022);
    this->mModel = model;
    return mModel != NULL;
}

/* 000044EC-00004590       .text CreateHeap__11daNpc_Kf1_cFv */
BOOL daNpc_Kf1_c::CreateHeap() {
    if (!bodyCreateHeap()) {
        return FALSE;
    }
    if (!itemCreateHeap()) {
        this->mpMorf = NULL;
        return FALSE;
    }
    else {
        // TODO nonmatching on account of storage of these?
        mAcchCir.SetWall(30.0f, 90.0f);
        mObjAcch.Set(fopAcM_GetPosition_p(this), fopAcM_GetOldPosition_p(this), this,
            1, &mAcchCir, fopAcM_GetSpeed_p(this));
    }
    return TRUE;
    /* Nonmatching */
}

/* 00004590-000045B0       .text daNpc_Kf1_Create__FP10fopAc_ac_c */
static s32 daNpc_Kf1_Create(fopAc_ac_c* i_this) {
    return static_cast<daNpc_Kf1_c*>(i_this)->_create();
    /* Nonmatching */
}

/* 000045B0-000045D0       .text daNpc_Kf1_Delete__FP11daNpc_Kf1_c */
static BOOL daNpc_Kf1_Delete(daNpc_Kf1_c* i_this) {
    return static_cast<daNpc_Kf1_c*>(i_this)->_delete();
    /* Nonmatching */
}

/* 000045D0-000045F0       .text daNpc_Kf1_Execute__FP11daNpc_Kf1_c */
static BOOL daNpc_Kf1_Execute(daNpc_Kf1_c* i_this) {
    return static_cast<daNpc_Kf1_c*>(i_this)->_execute();
    /* Nonmatching */
}

/* 000045F0-00004610       .text daNpc_Kf1_Draw__FP11daNpc_Kf1_c */
static BOOL daNpc_Kf1_Draw(daNpc_Kf1_c* i_this) {
    return static_cast<daNpc_Kf1_c*>(i_this)->_draw();
    /* Nonmatching */
}

/* 00004610-00004618       .text daNpc_Kf1_IsDelete__FP11daNpc_Kf1_c */
static BOOL daNpc_Kf1_IsDelete(daNpc_Kf1_c*) {
    return TRUE;
}

static actor_method_class l_daNpc_Kf1_Method = {
    (process_method_func)daNpc_Kf1_Create,
    (process_method_func)daNpc_Kf1_Delete,
    (process_method_func)daNpc_Kf1_Execute,
    (process_method_func)daNpc_Kf1_IsDelete,
    (process_method_func)daNpc_Kf1_Draw,
};

actor_process_profile_definition g_profile_NPC_KF1 = {
    /* LayerID      */ fpcLy_CURRENT_e,
    /* ListID       */ 0x0007,
    /* ListPrio     */ fpcPi_CURRENT_e,
    /* ProcName     */ PROC_NPC_KF1,
    /* Proc SubMtd  */ &g_fpcLf_Method.base,
    /* Size         */ sizeof(daNpc_Kf1_c),
    /* SizeOther    */ 0,
    /* Parameters   */ 0,
    /* Leaf SubMtd  */ &g_fopAc_Method.base,
    /* Priority     */ 0x016C,
    /* Actor SubMtd */ &l_daNpc_Kf1_Method,
    /* Status       */ 0x08 | fopAcStts_SHOWMAP_e | fopAcStts_NOCULLEXEC_e | fopAcStts_CULL_e | fopAcStts_UNK40000_e,
    /* Group        */ fopAc_ACTOR_e,
    /* CullType     */ fopAc_CULLBOX_CUSTOM_e,
};
